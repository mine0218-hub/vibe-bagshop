<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LUXURY BAG SHOP - 프리미엄 가죽 가방</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #ffffff;
            color: #1a1a1a;
        }
        canvas {
            display: block;
            outline: none;
        }
        .product-card:hover img {
            transform: scale(1.05);
        }
        .btn-transition {
            transition: all 0.3s ease;
        }
        #canvas-container {
            cursor: grab;
        }
        #canvas-container:active {
            cursor: grabbing;
        }
    </style>
</head>
<body class="overflow-x-hidden">

    <!-- 1. 네비게이션 메뉴 -->
    <nav class="fixed top-0 w-full z-50 bg-white/80 backdrop-blur-md border-b border-gray-100">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <div class="text-2xl font-bold tracking-tighter uppercase text-black">LUXE LEATHER</div>
            <div class="hidden md:flex space-x-10 text-sm font-medium">
                <a href="#" class="hover:text-black transition">Collection</a>
                <a href="#" class="hover:text-black transition">MD Picks</a>
                <a href="#" class="hover:text-black transition">Popular</a>
                <a href="#" class="hover:text-black transition">About</a>
            </div>
            <div class="flex space-x-5 items-center">
                <button class="p-2"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg></button>
                <button class="p-2 relative">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg>
                    <span class="absolute top-0 right-0 bg-black text-white text-[10px] rounded-full w-4 h-4 flex items-center justify-center">2</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- 2. MD 추천 상품 (Three.js 3D 쇼케이스) -->
    <section class="pt-32 pb-20 bg-gray-50 overflow-hidden">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-10">
                <span class="text-black font-bold tracking-widest text-xs uppercase">MD's Choice</span>
                <h2 class="text-4xl font-light mt-2">Signature Briefcase 3D</h2>
                <p class="text-gray-500 mt-4 max-w-lg mx-auto">프리미엄 가죽의 질감을 3D로 직접 확인해보세요. 원하는 색상을 선택하여 커스터마이징 할 수 있습니다.</p>
            </div>

            <div class="relative w-full h-[600px] bg-white rounded-3xl shadow-2xl overflow-hidden flex flex-col items-center justify-center">
                <!-- Three.js Canvas Container -->
                <div id="canvas-container" class="w-full h-full"></div>
                
                <!-- Color Controller Overlay -->
                <div class="absolute bottom-10 left-1/2 -translate-x-1/2 bg-white/90 backdrop-blur p-4 rounded-2xl shadow-lg border border-gray-100 flex items-center space-x-6">
                    <div class="flex flex-col">
                        <span class="text-[10px] text-gray-400 font-bold uppercase mb-2">Select Leather Color</span>
                        <div class="flex space-x-3">
                            <button onclick="updateModelColor('#000000')" class="w-8 h-8 rounded-full border-2 border-white ring-2 ring-gray-100 shadow-sm" style="background-color: #000000;"></button>
                            <button onclick="updateModelColor('#1a1a1a')" class="w-8 h-8 rounded-full border-2 border-white ring-2 ring-gray-100 shadow-sm" style="background-color: #1a1a1a;"></button>
                            <button onclick="updateModelColor('#333333')" class="w-8 h-8 rounded-full border-2 border-white ring-2 ring-gray-100 shadow-sm" style="background-color: #333333;"></button>
                            <button onclick="updateModelColor('#666666')" class="w-8 h-8 rounded-full border-2 border-white ring-2 ring-gray-100 shadow-sm" style="background-color: #666666;"></button>
                        </div>
                    </div>
                    <div class="h-10 w-px bg-gray-200"></div>
                    <button class="bg-black text-white px-8 py-3 rounded-xl hover:bg-gray-800 btn-transition text-sm font-bold">장바구니 담기</button>
                </div>

                <!-- Info Tooltip -->
                <div class="absolute top-10 right-10 text-right">
                    <p class="text-sm text-gray-400">Drag to Rotate</p>
                    <p class="text-sm text-gray-400">Scroll to Zoom</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 3. 인기상품 목록 (7개 + 더보기) -->
    <section class="py-24 bg-white">
        <div class="max-w-7xl mx-auto px-6">
            <div class="flex items-end justify-between mb-12">
                <div>
                    <h2 class="text-3xl font-bold">Most Popular</h2>
                    <p class="text-gray-500 mt-2">지금 가장 사랑받는 베스트셀러 상품입니다.</p>
                </div>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-x-8 gap-y-12" id="popular-grid">
                <!-- 상품 7개 렌더링 -->
                <script>
                    const products = [
                        { name: "Classic Tote Bag", price: "₩289,000", img: "https://images.unsplash.com/photo-1584917033904-493bb3c3cc07?auto=format&fit=crop&q=80&w=400" },
                        { name: "City Backpack", price: "₩155,000", img: "https://images.unsplash.com/photo-1548036328-c9fa89d128fa?auto=format&fit=crop&q=80&w=400" },
                        { name: "Leather Crossbody", price: "₩120,000", img: "https://images.unsplash.com/photo-1590874103328-eac38a683ce7?auto=format&fit=crop&q=80&w=400" },
                        { name: "Work Briefcase", price: "₩340,000", img: "https://images.unsplash.com/photo-1594223274512-ad4803739b7c?auto=format&fit=crop&q=80&w=400" },
                        { name: "Mini Shoulder Bag", price: "₩98,000", img: "https://images.unsplash.com/photo-1566150905458-1bf1fd113f0d?auto=format&fit=crop&q=80&w=400" },
                        { name: "Vintage Messenger", price: "₩210,000", img: "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?auto=format&fit=crop&q=80&w=400" },
                        { name: "Suede Bucket Bag", price: "₩185,000", img: "https://images.unsplash.com/photo-1605733513597-a8f8341084e6?auto=format&fit=crop&q=80&w=400" }
                    ];

                    const grid = document.getElementById('popular-grid');
                    products.forEach(p => {
                        grid.innerHTML += `
                            <div class="group cursor-pointer">
                                <div class="relative aspect-square overflow-hidden rounded-2xl bg-gray-100 mb-4">
                                    <img src="${p.img}" alt="${p.name}" class="w-full h-full object-cover btn-transition">
                                    <button class="absolute bottom-4 right-4 bg-white p-3 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition translate-y-2 group-hover:translate-y-0">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg>
                                    </button>
                                </div>
                                <h3 class="font-bold text-lg">${p.name}</h3>
                                <p class="text-black font-medium">${p.price}</p>
                            </div>
                        `;
                    });
                </script>

                <!-- 8번째 자리: 더보기 버튼 -->
                <div class="flex flex-col items-center justify-center border-2 border-dashed border-gray-200 rounded-2xl p-6 group hover:bg-gray-50 transition cursor-pointer">
                    <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4 group-hover:bg-black transition">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#6b7280" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="group-hover:stroke-white transition"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                    </div>
                    <span class="text-gray-500 font-bold group-hover:text-black transition">인기상품 더보기</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-20 px-6">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between border-b border-gray-800 pb-12">
            <div class="mb-10 md:mb-0">
                <h2 class="text-2xl font-bold mb-4 tracking-tighter">LUXE LEATHER</h2>
                <p class="text-gray-400 max-w-xs text-sm leading-relaxed">우리는 최고급 이탈리아 가죽을 사용하여 세대를 이어갈 수 있는 가방을 제작합니다.</p>
            </div>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-10">
                <div>
                    <h4 class="font-bold mb-6">Shopping</h4>
                    <ul class="text-gray-400 text-sm space-y-3">
                        <li>Store</li>
                        <li>Payments</li>
                        <li>Shipping</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-6">Service</h4>
                    <ul class="text-gray-400 text-sm space-y-3">
                        <li>Customer Care</li>
                        <li>Returns</li>
                        <li>Contact Us</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-6">Follow</h4>
                    <div class="flex space-x-4">
                        <div class="w-8 h-8 rounded-full bg-white flex items-center justify-center cursor-pointer hover:bg-black transition">IG</div>
                        <div class="w-8 h-8 rounded-full bg-white flex items-center justify-center cursor-pointer hover:bg-black transition">FB</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="max-w-7xl mx-auto pt-10 text-center md:text-left">
            <p class="text-gray-500 text-xs">&copy; 2026 LUXE LEATHER. All rights reserved.</p>
        </div>
    </footer>

    <!-- Three.js Logic -->
    <script>
        let scene, camera, renderer, bagModel, controls;
        let originalMaterials = [];

        // Three.js 초기화
        function initThreeJS() {
            const container = document.getElementById('canvas-container');
            if (!container) {
                console.error('Canvas container를 찾을 수 없습니다.');
                return;
            }

            const width = container.clientWidth;
            const height = container.clientHeight;

            // Scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xffffff);

            // Camera
            camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 1000);
            camera.position.set(0, 1, 5);

            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(width, height);
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.shadowMap.enabled = true;
            container.appendChild(renderer.domElement);

            // Lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(5, 10, 7);
            directionalLight.castShadow = true;
            scene.add(directionalLight);

            // Orbit Controls
            if (typeof THREE.OrbitControls !== 'undefined') {
                controls = new THREE.OrbitControls(camera, renderer.domElement);
                controls.enableDamping = true;
                controls.dampingFactor = 0.05;
                controls.enableZoom = true;
                controls.enablePan = false;
                controls.minDistance = 2;
                controls.maxDistance = 10;
                controls.maxPolarAngle = Math.PI / 2;
            }

            // Load GLB Model
            loadGLBModel();

            // Animation Loop
            animate();

            // Resize Event
            window.addEventListener('resize', onWindowResize);
        }

        // GLB 모델 로드
        function loadGLBModel() {
            // GLTFLoader 확인
            if (typeof THREE.GLTFLoader === 'undefined') {
                console.log('GLTFLoader를 찾을 수 없어 기본 모델을 생성합니다.');
                createFallbackModel();
                return;
            }

            const loader = new THREE.GLTFLoader();
            
            loader.load(
                './leatherhandbag3dmodel.glb',
                function (gltf) {
                    console.log('GLB 모델 로드 성공');
                    
                    bagModel = gltf.scene;
                    
                    // 모델 스케일 및 위치 조정
                    bagModel.scale.set(1.5, 1.5, 1.5);
                    bagModel.position.set(0, -0.5, 0);
                    
                    // 원본 재질 저장
                    bagModel.traverse((child) => {
                        if (child.isMesh) {
                            originalMaterials.push({
                                mesh: child,
                                material: child.material.clone()
                            });
                            child.castShadow = true;
                            child.receiveShadow = true;
                        }
                    });
                    
                    scene.add(bagModel);
                    console.log('3D 가방 모델이 성공적으로 로드되었습니다.');
                },
                function (xhr) {
                    const percent = (xhr.loaded / xhr.total * 100);
                    console.log(Math.round(percent) + '% 로드됨');
                },
                function (error) {
                    console.error('모델 로드 중 오류 발생:', error);
                    createFallbackModel();
                }
            );
        }

        // 기본 모델 생성
        function createFallbackModel() {
            console.log('기본 모델을 생성합니다.');
            
            const geometry = new THREE.BoxGeometry(2, 2, 1);
            const material = new THREE.MeshStandardMaterial({
                color: 0x000000,
                roughness: 0.4,
                metalness: 0.1,
            });
            
            bagModel = new THREE.Mesh(geometry, material);
            bagModel.position.set(0, -0.5, 0);
            scene.add(bagModel);
            
            originalMaterials.push({
                mesh: bagModel,
                material: material.clone()
            });
        }

        // 색상 업데이트 함수
        function updateModelColor(hexColor) {
            if (!bagModel) {
                console.log('모델이 아직 로드되지 않았습니다.');
                return;
            }
            
            originalMaterials.forEach(({mesh, material}) => {
                const newMaterial = material.clone();
                newMaterial.color.set(hexColor);
                mesh.material = newMaterial;
            });
        }

        // 애니메이션 루프
        function animate() {
            requestAnimationFrame(animate);
            
            if (controls) {
                controls.update();
            }
            
            if (renderer && scene && camera) {
                renderer.render(scene, camera);
            }
        }

        // 윈도우 리사이즈 처리
        function onWindowResize() {
            const container = document.getElementById('canvas-container');
            if (!container || !camera || !renderer) return;
            
            const width = container.clientWidth;
            const height = container.clientHeight;
            
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
            renderer.setSize(width, height);
        }

        // 페이지 로드 시 초기화
        window.addEventListener('load', function() {
            console.log('페이지 로드 완료, 3D 초기화 시작...');
            
            // Three.js가 로드되었는지 확인
            if (typeof THREE === 'undefined') {
                console.error('Three.js를 찾을 수 없습니다.');
                return;
            }
            
            initThreeJS();
        });

        // 전역 함수로 색상 변경 함수 노출
        window.updateModelColor = updateModelColor;
    </script>
</body>
</html>
